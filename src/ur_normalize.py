## Taken from urduhack's source code. Source: https://urduhack.akkefa.com/en/stable/_modules/urduhack/normalization/character.html#normalize

# Essential utilities for normalizing and removing garbage characters from urdu text.
# Imported in cleaner.py

import re
from typing import Dict
import unicodedata

URDU_ALL_CHARACTERS_UNICODE: Dict[str, str] = {'\u0600': '\u0600',
                                               '\u0601': '\u0601',
                                               '\u0602': '\u0602',
                                               '\u0603': '\u0603',
                                               '،': '\u060c',
                                               '؍': '\u060d',
                                               '؎': '\u060e',
                                               '؏': '\u060f',
                                               'ؐ': '\u0610',
                                               'ؑ': '\u0611',
                                               'ؒ': '\u0612',
                                               'ؓ': '\u0613',
                                               'ؔ': '\u0614',
                                               'ؕ': '\u0615',
                                               '؛': '\u061b',
                                               '؟': '\u061f',
                                               'ء': '\u0621',
                                               'ً': '\u064b',
                                               'ٌ': '\u064c',
                                               'ٍ': '\u064d',
                                               'َ': '\u064e',
                                               'ُ': '\u064f',
                                               'ِ': '\u0650',
                                               'ّ': '\u0651',
                                               'ْ': '\u0652',
                                               'ٓ': '\u0653',
                                               'ٔ': '\u0654',
                                               'ٖ': '\u0656',
                                               'ٗ': '\u0657',
                                               '٘': '\u0658',
                                               '٪': '\u066a',
                                               '٫': '\u066b',
                                               '٬': '\u066c',
                                               'ٰ': '\u0670',
                                               '۔': '\u06d4',
                                               'آ': '\u0622',
                                               'أ': '\u0623',
                                               'ا': '\u0627',
                                               'ب': '\u0628',
                                               'پ': '\u067e',
                                               'ت': '\u062a',
                                               'ٹ': '\u0679',
                                               'ث': '\u062b',
                                               'ج': '\u062c',
                                               'چ': '\u0686',
                                               'ح': '\u062d',
                                               'خ': '\u062e',
                                               'د': '\u062f',
                                               'ڈ': '\u0688',
                                               'ذ': '\u0630',
                                               'ر': '\u0631',
                                               'ڑ': '\u0691',
                                               'ز': '\u0632',
                                               'ژ': '\u0698',
                                               'س': '\u0633',
                                               'ش': '\u0634',
                                               'ص': '\u0635',
                                               'ض': '\u0636',
                                               'ط': '\u0637',
                                               'ظ': '\u0638',
                                               'ع': '\u0639',
                                               'غ': '\u063a',
                                               'ف': '\u0641',
                                               'ق': '\u0642',
                                               'ک': '\u06a9',
                                               'گ': '\u06af',
                                               'ل': '\u0644',
                                               'م': '\u0645',
                                               'ن': '\u0646',
                                               'ں': '\u06ba',
                                               'و': '\u0648',
                                               'ؤ': '\u0624',
                                               'ھ': '\u06be',
                                               'ہ': '\u06c1',
                                               'ۂ': '\u06c2',
                                               'ۃ': '\u06c3',
                                               'ی': '\u06cc',
                                               'ئ': '\u0626',
                                               'ے': '\u06d2',
                                               'ۓ': '\u06d3',
                                               '۰': '\u06f0',
                                               '۱': '\u06f1',
                                               '۲': '\u06f2',
                                               '۳': '\u06f3',
                                               '۴': '\u06f4',
                                               '۵': '\u06f5',
                                               '۶': '\u06f6',
                                               '۷': '\u06f7',
                                               '۸': '\u06f8',
                                               '۹': '\u06f9',
                                               }

urdu_charecters = {
    'آ': ['ﺁ', 'ﺂ'],
    'أ': ['ﺃ'],
    'ا': ['ﺍ', 'ﺎ'],
    'ب': ['ﺏ', 'ﺐ', 'ﺑ', 'ﺒ'],
    'پ': ['ﭖ', 'ﭘ', 'ﭙ'],
    'ت': ['ﺕ', 'ﺖ', 'ﺗ', 'ﺘ'],
    'ٹ': ['ﭦ', 'ﭧ', 'ﭨ', 'ﭩ'],
    'ث': ['ﺛ', 'ﺜ', 'ﺚ'],
    'ج': ['ﺝ', 'ﺞ', 'ﺟ', 'ﺠ'],
    'ح': ['ﺡ', 'ﺣ', 'ﺤ', 'ﺢ'],
    'خ': ['ﺧ', 'ﺨ', 'ﺦ'],
    'د': ['ﺩ', 'ﺪ'],
    'ذ': ['ﺬ', 'ﺫ'],
    'ر': ['ﺭ', 'ﺮ'],
    'ز': ['ﺯ', 'ﺰ'],
    'س': ['ﺱ', 'ﺲ', 'ﺳ', 'ﺴ'],
    'ش': ['ﺵ', 'ﺶ', 'ﺷ', 'ﺸ'],
    'ص': ['ﺹ', 'ﺺ', 'ﺻ', 'ﺼ'],
    'ض': ['ﺽ', 'ﺾ', 'ﺿ', 'ﻀ'],
    'ط': ['ﻃ', 'ﻄ'],
    'ظ': ['ﻅ', 'ﻇ', 'ﻈ'],
    'ع': ['ﻉ', 'ﻊ', 'ﻋ', 'ﻌ'],
    'غ': ['ﻍ', 'ﻏ', 'ﻐ'],
    'ف': ['ﻑ', 'ﻒ', 'ﻓ', 'ﻔ'],
    'ق': ['ﻕ', 'ﻖ', 'ﻗ', 'ﻘ'],
    'ل': ['ﻝ', 'ﻞ', 'ﻟ', 'ﻠ'],
    'م': ['ﻡ', 'ﻢ', 'ﻣ', 'ﻤ'],
    'ن': ['ﻥ', 'ﻦ', 'ﻧ', 'ﻨ'],
    'چ': ['ﭺ', 'ﭻ', 'ﭼ', 'ﭽ'],
    'ڈ': ['ﮈ', 'ﮉ'],
    'ڑ': ['ﮍ', 'ﮌ'],
    'ژ': ['ﮋ'],
    'ک': ['ﮎ', 'ﮏ', 'ﮐ', 'ﮑ', 'ﻛ', 'ك'],
    'گ': ['ﮒ', 'ﮓ', 'ﮔ', 'ﮕ'],
    'ں': ['ﮞ', 'ﮟ'],
    'و': ['ﻮ', 'ﻭ'],
    'ؤ': ['ﺅ'],
    'ھ': ['ﮪ', 'ﮬ', 'ﮭ', 'ﻬ', 'ﻫ', 'ﮫ'],
    'ہ': ['ﻩ', 'ﮦ', 'ﻪ', 'ﮧ', 'ﮩ', 'ﮨ', 'ه'],
    'ۂ': [],
    'ۃ': ['ة'],
    'ء': ['ﺀ'],
    'ی': ['ﯼ', 'ى', 'ﯽ', 'ﻰ', 'ﻱ', 'ﻲ', 'ﯾ', 'ﯿ', 'ي'],
    'ئ': ['ﺋ', 'ﺌ'],
    'ے': ['ﮮ', 'ﮯ', 'ﻳ', 'ﻴ'],
    'ۓ': [],
    '۰': ['٠'],
    '۱': ['١'],
    '۲': ['٢'],
    '۳': ['٣'],
    '۴': ['٤'],
    '۵': ['٥'],
    '۶': ['٦'],
    '۷': ['٧'],
    '۸': ['٨'],
    '۹': ['٩'],
    '۔': [],
    '؟': [],
    '٫': [],
    '،': [],
    'لا': ['ﻻ', 'ﻼ'],
    '': ['ـ']
}

diacritics = "\u064e \u064B \u0670 \u0650 \u064F \u064d".split()

_TRANSLATOR = {}
for key, value in urdu_charecters.items():
    _TRANSLATOR.update(dict.fromkeys(map(ord, value), key))


def normalize(text: str) -> str:
    text.translate(_TRANSLATOR)
    
def remove_diacritics(text: str) -> str:
    pattern = '|'.join(map(re.escape, diacritics))
    text = re.sub(pattern, '', text)

def normalize_urdu_text(text: str):
    if text is not None:
        normalize(text)
        remove_diacritics(text)
    
    return text

